<!DOCTYPE html>
<html>
  <head>
    <title>31 Surface Gradient Bump Mapping</title>
    <meta charset="utf-8">
    <style>
      .remark-slide-content {
        color: white;
        background-color: black;
        font-size: 50pt;
        padding: 0px 0.5em;
      }
      .remark-code-line { font-size: 19pt; margin: 0.2em 0px; }
      p { margin: 0.5em 0px; line-height: 120%; }
      code { margin: 0px 2em; }
    </style>
  </head>
  <body>
<textarea id="source">

- Hex-tiling の紹介
- Surfgrad パッケージ
- Surfgrad の概念
  - HDRP の Decal の Normal Blending で使用されている。
- サンプルの紹介
- Surfgrad の基本的なセットアップ方法
- Surfgrad ノード紹介
- Hex-tiling の詳細

---

Surface Gradient Bump Mapping は、バンプマッピングやノーマルマップを扱うための便利なフレームワークです。

これは Unity の中の人が論文を書いたんですが、難しいので簡単にまとめて説明します。

バンプマッピングなどを一度 Surface Gradient と呼ばれる概念に変換することによって、扱いを簡単にするというものです。

---

というのも、バンプマッピングの合成って案外難しいんですよね。

単に２つのノーマルマップを合成するだけでも結構難しくて、変な計算で合成するとおかしな結果になってしまいます。

---

また、異なるタンジェントを持つノーマルを合成するのも、かなり難易度高いです。

例えば、UV で貼られたノーマルマップに、Triplanar Mapping を使ったノーマルマップを合成する、なんてのは難しかったりするわけですね。

---

それがこの Surface Gradient に一旦変換すると、なんと足し算だけで合成できてしまいます。

UV でノーマルマップを貼りつつ、ディテールの表現は Triplanar Mapping を使う、なんてミックスも簡単にできます。

---

また、凹凸の強弱は掛け算でスケールをかけるだけで実現できます。

色々注意の必要だったバンプ表現が、破綻することなく直感的な足し算や掛け算で扱えてしまうんですね。

---

そして、合成や加工を行った後の Surface Gradient は、Resolve という操作を行なって、ワールド座標系上のノーマルベクトルに変換できます。

これをシェーダーの結果として出力すればいいわけですね。

---

この Surface Gradient の仕組みは、実は HDRP 内部でも既に使用されています。

Decal を使ってノーマルマップを合成することができますが、ここに組み込まれています。

---

今回紹介しているこの Surface Gradient Bump Mapping パッケージは、これを Shader Graph の中で使えるようにするものです。

---

</textarea>
    <script src="https://remarkjs.com/downloads/remark-latest.min.js">
    </script>
    <script>
      var slideshow = remark.create({
        ratio: '16:9',
        highlightStyle: 'sunburst',
        slideNumberFormat: ''
      });
    </script>
  </body>
</html>
