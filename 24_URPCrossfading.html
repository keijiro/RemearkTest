<!DOCTYPE html>
<html>
  <head>
    <title>24 URP Corssfading</title>
    <meta charset="utf-8">
    <style>
      .remark-slide-content {
        color: white;
        background-color: black;
        font-size: 50pt;
        padding: 0px 0.5em;
      }
      .remark-code-line { font-size: 30pt; margin: 0.2em 0px; }
      p { margin: 0.5em 0px; line-height: 120%; }
      code { margin: 0px 2em; }
    </style>
  </head>
  <body>
<textarea id="source">

みなさんこんにちは。

今回のトピックは、URP の新機能、LOD クロスフェーディングです。

---

Unity 2022.2 に搭載されている URP 14.0 では、新機能として LOD Group のクロスフェーディングに対応しています。

---

> GIF

LOD のクロスフェーディングっていうのは、まあこれですね。

LOD モデルの切り替えをクロスフェーディングによって滑らかにするという機能です。

---

左のように、単純に切り替えると、どうしても切り替えの瞬間が目立ってしまいます。

右のように、クロスフェーディングを使えば、切り替えを目立たなくすることができるんですね。

---

まあこれは分かりやすくするために作った極端な例なんですが……

> GIF 2

ちゃんと真面目に設定するとこんな感じですね。

---

単純な切り替えでは、どうしても切り替わった瞬間が分かってしまいますよね。

クロスフェーディングを使えば、これをかなり隠せることが分かると思います。

---

> Editor

LOD クロスフェーディングは、特別な設定を行わなくても、もう使えるようになっています。

---

LOD Group の設定で Fade Mode を Cross Fade に変更するだけで OK です。

---

クロスフェーディングの制御には２つの方式が用意されています。

一つは時間によってフェーディングする方式、もう一つは距離によってフェーディングする方式です。

---

この "Animate Cross-fading" をオンにすると、時間によるフェーディングになります。

LOD モデルが切り替わってから一定時間をかけてフェーディングする、というものですね。

---

> B-Roll

ちなみにこのフェーディングにかける時間は crossFadeAnimationDuration という変数を使ってスクリプトから変更することもできます。

---

デフォルト値は 0.5 秒に設定されていますね。

---

もうひとつの距離を使う方式は、この Fade Transition Width というパラメーターで設定できます。

これは、隣接する２つの LOD がどの程度オーバーラップしているかを表す数値だと思えばいいです。

---

例えばこれを 0.2 に設定したら、この辺り、20% ぐらいまではクロスフェードで繋がっているということですね。

---

> Camera

この２つの方式のどちらを使うべきかって問題がありますが、個人的には、見た目の自然さを気にするなら距離方式、パフォーマンスを気にするなら時間方式かなと思っています。

---

クロスフェーディングには描画負荷がかかるので、できれば早くフェーディングし終わって欲しいんですよね。

時間方式は、一定時間内に必ずクロスフェーディングが終わるので、その点、安心感があります。

---

でも、時間方式だと、カメラがピタって止まっているときに、LOD モデルがじんわりと変形しているのがバレてしまうことがあるんですよね。

そういう場合は距離方式の方がいいのかなと思います。

---

</textarea>
    <script src="https://remarkjs.com/downloads/remark-latest.min.js">
    </script>
    <script>
      var slideshow = remark.create({
        ratio: '16:9',
        highlightStyle: 'sunburst',
        slideNumberFormat: ''
      });
    </script>
  </body>
</html>
