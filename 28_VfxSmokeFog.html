<!DOCTYPE html>
<html>
  <head>
    <title>28 VFX Smoke/Fog</title>
    <meta charset="utf-8">
    <style>
      .remark-slide-content {
        color: white;
        background-color: black;
        font-size: 50pt;
        padding: 0px 0.5em;
      }
      .remark-code-line { font-size: 19pt; margin: 0.2em 0px; }
      p { margin: 0.5em 0px; line-height: 120%; }
      code { margin: 0px 2em; }
    </style>
  </head>
  <body>
<textarea id="source">

みなさんこんにちは。

今回はトピックは VFX Graph の新機能紹介です。

---

今回は久しぶりに VFX Graph のお話をしたいと思います。

実は VFX Graph には色々新機能が継続的に追加されているんですけど、今回はその中でも、煙やフォグに関係する新機能をいくつか紹介します。

---

まず最初は Unity 2022.2, HDRP 14.0 で追加された、Six-Way Smoke の機能です。

これは、テクスチャの動的なライティングを可能にする技術ですね。

---

こんな感じで、テクスチャ素材を使ったエフェクトに対して、リアルタイムにライティングを適用することができます。

---

ライティングが適用できるようになったことで、環境に馴染ませることが楽になりましたね。

また、ライティングによる見た目の変化が生じることで、少ない素材からも変化に富んだエフェクトを作ることができるようになります。

---

…というように色々メリットがあるので、最近流行っている手法なんですよね。

VFX Graph もこれに対応したという感じです。

---

原理はシンプルで、こんな感じで上下左右前後の６方向からのライティングに対する応答を、２枚のテクスチャにベイクしています。

この手法は Six-Way Lightmap とか、Six-Point Lighting とか、色んな名前で呼ばれているんですが、VFX Graph では Six-Way Smoke と呼ぶことしました。

---

使い方は簡単で、HDRP Lit Output の中で、Material Type を Six Way Smoke Lit に変更するだけです。

すると、Positive Axes と Negative Axes の２つのテクスチャを設定できるようになるので、それぞれ対応する素材を設定するだけです。

---

もうひとつ、VFX Graph の Six-Way Smoke には面白い機能が用意されていて、自己発光を表現することができます。

この爆発エフェクトでは、その自己発光の機能を使って爆炎の明るさを表現しています。

---

この自己発光の情報は、独立したテクスチャとして Emissive Map を与えるか、あるいは Negative Axes の alpha チャンネルに埋め込んで適用することができます。

通常、Negative Axes テクスチャの alpha チャンネルは、使用されずに余っている状態なので、これを自己発光の用途に転用してしまおうというわけですね。

---

この Six-Way Smoke の機能については、Unity 公式ブログの方に先日投稿された記事の中で、更に詳しく解説されています。

サンプル素材なども公開されているので、この機能に興味を持って試す際には、ぜひ一度目を通してみてください。

概要欄からリンクしておきます。

---

もう一点、紹介したい機能は、Unity 2023.1 における Volumetric Fog 対応です。

Volumetric Fog については少し前の動画で紹介しましたよね。

そこで紹介したのは、Shader Graph が Volumetric Fog に対応したと言う話でした。

---

そして今回は、VFX Graph も Volumetric Fog に対応したと言う話になります。

これによってパーティクルエフェクト的な表現を Volumetric Fog に組み込むことが可能になります。

---

使い方は簡単で、VFX Graph の中で Output Volumetric Fog Context を使うだけですね。

各パーティクルの Color, Alpha, Size などがこの中で適用されます。

---

広い範囲のフォグの表現を作るには Shader Graph の方が便利なんですけどね。

狭い範囲での細かい事象を表現するには VFX Graph の方が便利かもしれません。

---

今回はこんな感じで VFX Graph の新機能の一部について解説してきましたが、いかがでしたでしょうか？

---

前回 Volumetric Fog の話をしたので、せっかくだから関係する話をしておこうと思ったんですよね。

VFX Graph には、この他にも新機能がいくつかあるので、それはまた別の機会に紹介したいと思います。

---

今回の動画が参考になったという方は高評価やコメントを頂けると有難いです。

それではまた次回の動画でお会いしましょう。

</textarea>
    <script src="https://remarkjs.com/downloads/remark-latest.min.js">
    </script>
    <script>
      var slideshow = remark.create({
        ratio: '16:9',
        highlightStyle: 'sunburst',
        slideNumberFormat: ''
      });
    </script>
  </body>
</html>
